<div class="wrapper">
  <form class="form"
        [formGroup]="subcategoryForm"
        (ngSubmit)="onEditSubcategory()">
    <div class="name">
      name:
      <input formControlName="name"
             type="text">
    </div>

    <div class="order">
      order:
      <input formControlName="order"
             type="number"
             name="order"
             min="1"
             max="99"
             value="99">
    </div>
    <div class="isVisible">
      isVisible:<br>
      <input formControlName="isVisible"
             type="radio"
             [value]=true>true<br>
      <input formControlName="isVisible"
             type="radio"
             [value]=false>false
    </div>
    <div class="form__submit-button">
      <button class="submit-button"
              [disabled]="!subcategoryForm.valid"
              type="submit">
        <span *ngIf="mode==='create'">Create</span>
        <span *ngIf="mode==='update'">Update</span>
      </button>
      <div class="loader"
           *ngIf="loading"></div>
    </div>

  </form>
  <!-- [disabled]="subcategory?.subcategories.length !== 0" -->

  <button class="delete__submit-button"
          (click)="onDelete()"
          [disabled]="subcategoryPostsTotalCount > 0">Delete</button>
  <button class="posts__button"
          (click)="onLoadPosts()"
          *ngIf="subcategoryPostsTotalCount !== 0 && mode === 'update'">Show Posts</button>
  <ng-select *ngIf="loadedPosts"
             [items]="subcategoryPosts"
             [virtualScroll]="true"
             [loading]="loading"
             bindLabel="title"
             placeholder="Posts..."
             (scroll)="onScroll($event)"
             (scrollToEnd)="onScrollToEnd()"
             [(ngModel)]="selectedPost">
  </ng-select>

  <div class="link"
       *ngIf="selectedPost"
       (click)="goToPost(selectedPost)">
    {{selectedPost?.title}}
  </div>
  <div class="dev-check"
       style="max-width: 500px;overflow-wrap: break-word;">
    <p>Form Status: {{ subcategoryForm.status }}</p>
    <p>Form Values: {{ subcategoryForm.value | json}}</p>
    <p>Errors:</p>
    <ul>
      <li>
        <p>Name Errors: {{ name.errors | json}}</p>
      </li>
      <li>
        <p>Order Errors: {{ order.errors | json}}</p>
      </li>
    </ul>
  </div>
</div>
